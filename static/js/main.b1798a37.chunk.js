(this.webpackJsonpfacies=this.webpackJsonpfacies||[]).push([[0],{262:function(e,t,n){},263:function(e,t,n){},269:function(e,t){},270:function(e,t){},278:function(e,t){},281:function(e,t){},282:function(e,t){},283:function(e,t){},285:function(e,t,n){"use strict";n.r(t);var c=n(38),r=n.n(c),u=n(235),i=n.n(u),o=(n(262),n(4)),s=(n(263),n(138)),a=n(46);function l(e){var t=e.file,n=e.img,r=e.position,u=e.setImgLoaded,i=Object(c.useState)(null),l=Object(o.a)(i,2),f=l[0],j=l[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),g=O[0],d=O[1],h=Object(c.useState)(null),p=Object(o.a)(h,2),v=p[0],m=p[1],x=Object(c.useState)(null),R=Object(o.a)(x,2),S=R[0],w=R[1];return Object(c.useEffect)((function(){t&&(n.current.src=t,u(t),r&&s.e((function(){s.c("/facies/model/model.json").then((function(e){var t=s.a.fromPixels(n.current),c=s.d(t,[r.top,r.left],[r.length,r.length]),u=s.b.resizeNearestNeighbor(c,[256,256],!0).div(255).reshape([1,256,256,3]);e.predict(u).array().then((function(e){e=e[0];var t=n.current.getBoundingClientRect(),c=t.top+r.top+e[0]*r.length,u=t.left+r.left+e[1]*r.length,i=(e[2]-e[0])*r.length,o=(e[3]-e[1])*r.length;j(c),d(u),w(i),m(o)}))}))})))}),[t,r]),t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:"img",ref:n,src:"",alt:"pet"}),Object(a.jsx)("div",{className:"faceBox",style:{top:f,left:g,width:v,height:S}})]}):null}function f(e){var t=e.setFile;return Object(a.jsx)("input",{className:"inputFile",type:"file",name:"file",onChange:function(e){var n=e.target.files[0];if(n&&"image"===n.type.substr(0,5)){var c=new FileReader;c.onload=function(e){t(c.result)},c.readAsDataURL(n)}}})}function j(e){var t=e.img,n=e.box,r=(e.position,e.setPosition),u=e.imgLoaded,i=Object(c.useState)(),s=Object(o.a)(i,2),l=s[0],f=s[1],j=Object(c.useState)(),b=Object(o.a)(j,2),O=b[0],g=b[1],d=Object(c.useState)(),h=Object(o.a)(d,2),p=h[0],v=h[1],m=Object(c.useRef)(!1),x=Object(c.useRef)(),R=Object(c.useRef)(),S=Object(c.useRef)(),w=Object(c.useRef)(),F=Object(c.useRef)(),M=Object(c.useRef)(),L=Object(c.useRef)(),y=Object(c.useRef)(),C=Object(c.useRef)();Object(c.useEffect)((function(){if(t.current){var e=t.current.getBoundingClientRect();F.current=e.top,M.current=e.left,L.current=e.bottom,y.current=e.right,S.current=t.current.width,w.current=t.current.height,S.current>w.current?(v(w.current),C.current=!1):(v(S.current),C.current=!0),f(F.current),g(M.current)}}),[u]);var N=function(e){var t=e+p;return!(e<F.current||t>L.current)},B=function(e){var t=e+p;return!(e<M.current||t>y.current)};return t.current?Object(a.jsx)("div",{ref:n,className:"box",onMouseDown:function(e){(e=e||window.event).preventDefault(),m.current=!0,x.current=e.clientX,R.current=e.clientY},onMouseMove:function(e){if(m.current){(e=e||window.event).preventDefault();var t=x.current-e.clientX,n=R.current-e.clientY;if(x.current=e.clientX,R.current=e.clientY,C.current){var c=l-n;N(c)&&f(c)}else{var r=O-t;B(r)&&g(r)}}},onMouseUp:function(e){m.current=!1,r({top:Math.floor(l-F.current),left:Math.floor(O-M.current),length:Math.floor(p)})},style:{width:p,height:p,top:l,left:O}}):null}function b(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(null),i=Object(o.a)(u,2),s=i[0],b=i[1],O=Object(c.useState)(null),g=Object(o.a)(O,2),d=g[0],h=g[1],p=Object(c.useRef)(null),v=Object(c.useRef)(null);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{setFile:r}),Object(a.jsx)(j,{img:v,box:p,position:s,setPosition:b,imgLoaded:d}),Object(a.jsx)(l,{file:n,img:v,position:s,setImgLoaded:h})]})}var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,286)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,u=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),u(e),i(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(b,{})}),document.getElementById("root")),O()}},[[285,1,2]]]);
//# sourceMappingURL=main.b1798a37.chunk.js.map