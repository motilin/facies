(this.webpackJsonpfacies=this.webpackJsonpfacies||[]).push([[0],{262:function(e,t,n){},263:function(e,t,n){},269:function(e,t){},270:function(e,t){},278:function(e,t){},281:function(e,t){},282:function(e,t){},283:function(e,t){},285:function(e,t,n){"use strict";n.r(t);var c=n(37),r=n.n(c),u=n(235),i=n.n(u),s=(n(262),n(4)),o=(n(263),n(138)),a=n(46);function l(e){var t=e.file,n=e.img,r=e.position,u=(e.imgResized,e.setImgResized),i=e.imgLoaded,l=e.setImgLoaded,f=Object(c.useState)(null),j=Object(s.a)(f,2),b=j[0],O=j[1],d=Object(c.useState)(null),g=Object(s.a)(d,2),h=g[0],m=g[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),R=v[0],w=v[1],x=Object(c.useState)(null),S=Object(s.a)(x,2),F=S[0],L=S[1],I=Object(c.useState)(null),M=Object(s.a)(I,2),y=M[0],z=M[1],C=Object(c.useState)(null),N=Object(s.a)(C,2),B=N[0],D=N[1],E=Object(c.useRef)(null);return Object(c.useEffect)((function(){t&&(n.current.src=t)}),[t]),Object(c.useEffect)((function(){!E.current&&n.current&&n.current.complete&&0!==n.current.naturalHeight&&function(){var e=.9*window.innerHeight,t=.9*window.innerWidth,c=e/t,r=n.current.height/n.current.width;r>c?(D(e),z(e/r)):(z(t),D(t*r)),E.current=!0,u(!0)}()}),[i]),Object(c.useEffect)((function(){r&&E.current&&o.e((function(){o.c("/facies/model/model.json").then((function(e){var t=o.a.fromPixels(n.current),c=o.d(t,[r.top,r.left],[r.length,r.length]),u=o.b.resizeNearestNeighbor(c,[256,256],!0).div(255).reshape([1,256,256,3]),i=e.predict(u).dataSync(),s=n.current.getBoundingClientRect(),a=s.left+r.left+i[0]*r.length,l=s.top+r.top+i[1]*r.length,f=(i[2]-i[0])*r.length,j=(i[3]-i[1])*r.length;O(l),m(a),L(j),w(f)}))}))}),[r]),t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:"img",ref:n,src:"",alt:"pet",onLoad:function(){E.current=!1,u(!1),l(!0)},style:{width:y,height:B}}),Object(a.jsx)("div",{className:"faceBox",style:{top:b,left:h,width:R,height:F}})]}):null}function f(e){var t=e.setFile,n=e.setImgLoaded;return Object(a.jsx)("input",{className:"inputFile",type:"file",name:"file",onChange:function(e){n(!1);var c=e.target.files[0];if(c&&"image"===c.type.substr(0,5)){var r=new FileReader;r.onload=function(e){t(r.result)},r.readAsDataURL(c)}}})}function j(e){var t=e.img,n=e.box,r=(e.position,e.setPosition),u=e.imgResized,i=Object(c.useState)(),o=Object(s.a)(i,2),l=o[0],f=o[1],j=Object(c.useState)(),b=Object(s.a)(j,2),O=b[0],d=b[1],g=Object(c.useState)(),h=Object(s.a)(g,2),m=h[0],p=h[1],v=Object(c.useRef)(!1),R=Object(c.useRef)(),w=Object(c.useRef)(),x=Object(c.useRef)(),S=Object(c.useRef)(),F=Object(c.useRef)(),L=Object(c.useRef)(),I=Object(c.useRef)(),M=Object(c.useRef)(),y=Object(c.useRef)();Object(c.useEffect)((function(){if(t.current){var e=t.current.getBoundingClientRect();F.current=e.top,L.current=e.left,I.current=e.bottom,M.current=e.right,x.current=t.current.width,S.current=t.current.height,x.current>S.current?(p(S.current),y.current=!1):(p(x.current),y.current=!0),f(F.current),d(L.current)}}),[u]);var z=function(e){var t=e+m;return!(e<F.current||t>I.current)},C=function(e){var t=e+m;return!(e<L.current||t>M.current)};return t.current?Object(a.jsx)("div",{ref:n,className:"box",onMouseDown:function(e){(e=e||window.event).preventDefault(),v.current=!0,R.current=e.clientX,w.current=e.clientY},onMouseMove:function(e){if(v.current){(e=e||window.event).preventDefault();var t=R.current-e.clientX,n=w.current-e.clientY;if(R.current=e.clientX,w.current=e.clientY,y.current){var c=l-n;z(c)&&f(c)}else{var r=O-t;C(r)&&d(r)}}},onMouseUp:function(e){v.current=!1,r({top:Math.floor(l-F.current),left:Math.floor(O-L.current),length:Math.floor(m)})},style:{width:m,height:m,top:l,left:O}}):null}function b(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(null),i=Object(s.a)(u,2),o=i[0],b=i[1],O=Object(c.useState)(null),d=Object(s.a)(O,2),g=d[0],h=d[1],m=Object(c.useState)(null),p=Object(s.a)(m,2),v=p[0],R=p[1],w=Object(c.useRef)(null),x=Object(c.useRef)(null);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f,{setFile:r,setImgLoaded:h}),Object(a.jsx)(j,{img:x,box:w,position:o,setPosition:b,imgResized:v}),Object(a.jsx)(l,{file:n,img:x,position:o,imgResized:v,setImgResized:R,imgLoaded:g,setImgLoaded:h})]})}var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,286)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,u=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),u(e),i(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(b,{})}),document.getElementById("root")),O()}},[[285,1,2]]]);
//# sourceMappingURL=main.eca92597.chunk.js.map